<h2>Generate Map from JSON</h2>
<form id="json-form">
  <textarea id="json-input" rows="10" cols="50" placeholder='[{"name": "Oslo"}, {"name": "Bergen"}]'></textarea><br />
  <button type="submit">Generate Map</button>
</form>

<h2>Generate Map from Blog URL</h2>
<form id="blog-form">
  <input type="url" id="blog-input" placeholder="Enter blog URL" size="50" required><br />
  <button type="submit">Generate Map from Blog</button>
</form>

<script>
  // Existing JSON form handler
  document.getElementById('json-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const data = JSON.parse(document.getElementById('json-input').value);
    const resp = await fetch('/api/generate', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    const result = await resp.json();
    if (result.map_id) window.location.href = `/map/${result.map_id}`;
    else alert("Failed to generate map");
  });

  // New Blog URL form handler
  document.getElementById('blog-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const url = document.getElementById('blog-input').value;
    const resp = await fetch('/api/llm_parse', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ url })
    });
    const result = await resp.json();
    if (result.map_id) window.location.href = `/map/${result.map_id}`;
    else alert("Failed to parse blog and generate map");
  });
</script>